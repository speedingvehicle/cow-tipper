var R=Object.defineProperty;var M=e=>{throw TypeError(e)};var U=(e,t,s)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var S=(e,t,s)=>U(e,typeof t!="symbol"?t+"":t,s),w=(e,t,s)=>t.has(e)||M("Cannot "+s);var a=(e,t,s)=>(w(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>t.has(e)?M("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),d=(e,t,s,o)=>(w(e,t,"write to private field"),o?o.call(e,s):t.set(e,s),s),u=(e,t,s)=>(w(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const b of r.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const q=Object.freeze([{name:"Cow Scarer",description:"Scare the cow into producing 10 gallons per second",cost:50,effect:{type:"INCREMENT",value:10}},{name:"Farmer Fred",description:"Multiply the milking speed by 1/10.",cost:1e3,effect:{type:"SPEED",value:1.1}},{name:"Herd of Cows",description:"Introduce 10 additional cows",cost:15e3,effect:{type:"INCREMENT",value:100}},{name:"Locked",description:"???",cost:1e5,effect:{type:"UNKNOWN",value:0}}]),B=22e3,P="MOOooOOOoO00oOO0ooo00oOOO0Oooo0OO0OO",D=document.querySelector(".count-value");var l,h,v,f,g,m,p,i,y,I,C;class x{constructor(){c(this,i);c(this,l);c(this,h);c(this,v,1e3);c(this,f,1);c(this,g,0);c(this,m,[]);c(this,p,null);S(this,"state",{count:0,ownedUpgrades:{},instructions:!0,created:!1});d(this,h,[]),u(this,i,I).call(this)}subscribe(t){a(this,h).push(t)}increment(t=1){this.state.count+=t,u(this,i,y).call(this)}purchaseUpgrade(t){const s=q[t];return this.state.count>=s.cost?(this.state.count-=s.cost,this.state.ownedUpgrades[t]=(this.state.ownedUpgrades[t]??0)+1,a(this,m).push(s),u(this,i,y).call(this),!0):!1}animateDisplay(t){const s=parseInt(D.textContent,10);if(s){a(this,l)&&clearInterval(a(this,l));const o=Math.ceil((this.state.count-s)/25);let n=s;d(this,l,setInterval(()=>{n+=o,n>=this.state.count&&(n=this.state.count,clearInterval(a(this,l))),requestAnimationFrame(()=>{t.textContent=String(n)})},10))}else requestAnimationFrame(()=>{t.textContent=String(this.state.count)})}setInstructionsHidden(t){t.setAttribute("hidden",""),this.state.instructions=!1}setCreated(){this.state.created=!0}init(){u(this,i,y).call(this)}get count(){return this.state.count}get ownedUpgrades(){return this.state.ownedUpgrades}}l=new WeakMap,h=new WeakMap,v=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,p=new WeakMap,i=new WeakSet,y=function(){a(this,h).forEach(t=>t(this.state))},I=function(){a(this,p)&&clearInterval(a(this,p)),d(this,p,setInterval(()=>{this.increment(a(this,g)),a(this,m).length>0&&u(this,i,C).call(this)},Math.max(a(this,v)/a(this,f),33)))},C=function(){let t=0,s=1;a(this,m).forEach(o=>{o.effect.type==="INCREMENT"&&(t+=o.effect.value),o.effect.type==="SPEED"&&(s*=o.effect.value)}),d(this,g,a(this,g)+t),d(this,f,a(this,f)*s),u(this,i,I).call(this),d(this,m,[])};const L=new x,T=document.createElement("div");T.classList.add("loading");const A=document.createElement("div");A.innerText="Loading...";const N=document.createElement("img");N.src="assets/images/loading.gif";const $=document.createElement("button");$.classList.add("loading-button");$.innerText="Play";T.append(A,N);const F=new Audio("assets/sound/bgm.mp3");F.loop=!0;const H=Array.from({length:11},(e,t)=>new Audio(`assets/sound/sfx-${t}.mp3`)),E=new Audio("assets/sound/moo.mp3"),G=document.querySelector(".count-value"),O=document.querySelector(".cow");O.addEventListener("click",()=>{L.increment();const e=H[Math.floor(Math.random()*11)],t=Math.random()*1.5+.5,s=Math.random()*540-270;e.currentTime=0,e.playbackRate=t,e.play(),requestAnimationFrame(()=>{O.style.transform=`rotate(${s}deg)`}),setTimeout(()=>{requestAnimationFrame(()=>{O.style.transform="rotate(0deg)"})},50)});const K=document.querySelector(".instructions"),_=document.querySelector(".upgrade-container");function j({cost:e,description:t,name:s},o){const n=document.createElement("button");return n.classList.add("upgrade"),n.id=`upgrade-${o}`,n.innerHTML=`
			<div class="upgrade-image">
				<img height="64" width="64" src="assets/images/upgrade-${o}.png" />
				<div class="upgrade-owned">0</div>
			</div>
			<div class="upgrade-info">
				<div class="upgrade-title">${s}</div>
				<div class="upgrade-description">${t}</div>
			</div>
			<div class="upgrade-cost">${e}</div>
		`,n.addEventListener("click",()=>{if(L.purchaseUpgrade(o)){const r=Math.random()+.75;E.currentTime=0,E.playbackRate=r,E.play()}}),n}function k(){window.open("oops.html","","alwaysRaised=yes, height=300, menubar=no, resizable=no, status=no, titlebar=no, toolbar=no, width=300")}function Q(){k(),document.title=P,document.body.style.cursor="none";const e=`${Math.random()*100}%`,t=`${Math.random()*100}%`,s=`${Math.random()*100}%`,o=`${Math.random()*100}%`,n=document.createElement("img");n.src="assets/images/360.gif",n.style.position="absolute",n.style.zIndex="10000",n.style.inset="0",n.style.height=e,n.style.width=t,n.style.left=s,n.style.top=o,document.body.append(n)}function W(){const e=new Audio("assets/sound/special.mp3");e.play(),document.body.append(e)}export{B as T,q as U,W as a,$ as b,G as c,j as d,L as g,K as i,T as l,F as m,k as o,Q as t,_ as u};
