var M=Object.defineProperty;var E=i=>{throw TypeError(i)};var L=(i,t,e)=>t in i?M(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var I=(i,t,e)=>L(i,typeof t!="symbol"?t+"":t,e),w=(i,t,e)=>t.has(i)||E("Cannot "+e);var r=(i,t,e)=>(w(i,t,"read from private field"),e?e.call(i):t.get(i)),c=(i,t,e)=>t.has(i)?E("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),d=(i,t,e,o)=>(w(i,t,"write to private field"),o?o.call(i,e):t.set(i,e),e),l=(i,t,e)=>(w(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const O of n.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&o(O)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const N=Object.freeze([{name:"Cow Scarer",description:"Scare the cow into producing 10 gallons per second",image:"scarer",cost:50,effect:{type:"INCREMENT",value:10}},{name:"Farmer Fred",description:"Multiply the milking speed by 1/10.",image:"fred",cost:1e3,effect:{type:"SPEED",value:1.1}},{name:"Herd of Cows",description:"Introduce 10 additional cows",image:"herd",cost:15e3,effect:{type:"INCREMENT",value:100}},{name:"Locked",description:"???",image:"locked",cost:1e5,effect:{type:"UNKNOWN",value:0}}]),D=22e3,S="MOOooOOOoO00oOO0ooo00oOOO0Oooo0OO0OO",U=document.querySelector(".count-value");var u,p,v,m,g,h,f,a,y,b,C;class T{constructor(){c(this,a);c(this,u);c(this,p);c(this,v,1e3);c(this,m,1);c(this,g,0);c(this,h,[]);c(this,f,null);I(this,"state",{count:0,ownedUpgrades:{},instructions:!0,created:!1});d(this,p,[]),l(this,a,b).call(this)}subscribe(t){r(this,p).push(t)}increment(t=1){this.state.count+=t,l(this,a,y).call(this)}purchaseUpgrade(t){const e=N[t];this.state.count>=e.cost&&(this.state.count-=e.cost,this.state.ownedUpgrades[t]=(this.state.ownedUpgrades[t]??0)+1,r(this,h).push(e),l(this,a,y).call(this))}animateDisplay(t){const e=parseInt(U.textContent,10);if(e){r(this,u)&&clearInterval(r(this,u));const o=Math.ceil((this.state.count-e)/25);let s=e;d(this,u,setInterval(()=>{s+=o,s>=this.state.count&&(s=this.state.count,clearInterval(r(this,u))),requestAnimationFrame(()=>{t.textContent=String(s)})},10))}else requestAnimationFrame(()=>{t.textContent=String(this.state.count)})}setInstructionsHidden(t){t.setAttribute("hidden",""),this.state.instructions=!1}setCreated(){this.state.created=!0}init(){l(this,a,y).call(this)}get count(){return this.state.count}get ownedUpgrades(){return this.state.ownedUpgrades}}u=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,g=new WeakMap,h=new WeakMap,f=new WeakMap,a=new WeakSet,y=function(){r(this,p).forEach(t=>t(this.state))},b=function(){r(this,f)&&clearInterval(r(this,f)),d(this,f,setInterval(()=>{this.increment(r(this,g)),r(this,h).length>0&&l(this,a,C).call(this)},Math.max(r(this,v)/r(this,m),33)))},C=function(){let t=0,e=1;r(this,h).forEach(o=>{o.effect.type==="INCREMENT"&&(t+=o.effect.value),o.effect.type==="SPEED"&&(e*=o.effect.value)}),d(this,g,r(this,g)+t),d(this,m,r(this,m)*e),l(this,a,b).call(this),d(this,h,[])};const $=new T;function R({cost:i,description:t,image:e,name:o},s){const n=document.createElement("button");return n.classList.add("upgrade"),n.id=`upgrade-${s}`,n.innerHTML=`
			<div class="upgrade-image">
				<img height="64" width="64" src="assets/images/${e}.png" />
				<div class="upgrade-owned">0</div>
			</div>
			<div class="upgrade-info">
				<div class="upgrade-title">${o}</div>
				<div class="upgrade-description">${t}</div>
			</div>
			<div class="upgrade-cost">${i}</div>
		`,n.addEventListener("click",()=>$.purchaseUpgrade(s)),n}function A(){window.open("oops.html","","alwaysRaised=yes, height=300, menubar=no, resizable=no, status=no, titlebar=no, toolbar=no, width=300")}function F(){A(),document.title=S;const i=`${Math.random()*100}%`,t=`${Math.random()*100}%`,e=`${Math.random()*100}%`,o=`${Math.random()*100}%`,s=document.createElement("img");s.src="assets/images/360.gif",s.style.position="absolute",s.style.zIndex="10000",s.style.inset="0",s.style.height=i,s.style.width=t,s.style.left=e,s.style.top=o,document.body.append(s)}function H(){const i=new Audio("assets/sound/special.mp3");i.play(),document.body.append(i)}export{D as T,N as U,H as a,R as c,$ as g,A as o,F as t};
