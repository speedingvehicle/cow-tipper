import{g as e,U as l,T as g,t as f,a as y,c as S}from"./util-CXsSgnGn.js";const s=document.createElement("div");s.classList.add("loading");document.body.insertAdjacentElement("afterbegin",s);const m=document.createElement("div");m.innerText="Loading...";const b=document.createElement("img");b.src="assets/images/loading.gif";const r=document.createElement("button");r.classList.add("loading-button");r.innerText="Play";s.append(m,b);const p=new Audio("assets/sound/bgm.mp3");p.loop=!0;const h=document.querySelector(".count-value"),c=document.querySelector(".cow"),w=Array.from({length:11},(t,o)=>new Audio(`assets/sound/sfx-${o}.mp3`));c.addEventListener("click",()=>{e.increment();const t=w[Math.floor(Math.random()*11)],o=Math.random()*1.5+.5,a=Math.random()*540-270;t.currentTime=0,t.playbackRate=o,t.play(),requestAnimationFrame(()=>{c.style.transform=`rotate(${a}deg)`}),setTimeout(()=>{requestAnimationFrame(()=>{c.style.transform="rotate(0deg)"})},50)});const A=document.querySelector(".instructions"),T=document.querySelector(".upgrade-container");function E(t){t.instructions&&t.count>25&&e.setInstructionsHidden(A)}function q(){e.animateDisplay(h)}function v(t){document.title=`Cow Tipper - ${t.count} gallons`}function C(t){l.forEach(({cost:o},a)=>{const n=document.querySelector(`#upgrade-${a}`);if(n){const d=e.count>o,u=n.querySelector(".upgrade-owned"),i=t.ownedUpgrades[a]??0;d&&n.hasAttribute("aria-disabled")?n.removeAttribute("aria-disabled"):!d&&!n.hasAttribute("aria-disabled")&&n.setAttribute("aria-disabled",""),i&&(n.hasAttribute("data-owned")||n.setAttribute("data-owned",""),parseInt(u.textContent)!==i&&(u.textContent=String(i)))}})}function k(t){t.count>g&&!t.created&&(window.onclick=f,document.body.onclick=y,e.setCreated())}setTimeout(()=>{r.addEventListener("click",()=>{s.remove(),p.play()})},250);setTimeout(()=>{s.append(r)},1e3*1.9);l.map((t,o)=>{const a=S(t,o);T.appendChild(a)});e.subscribe(q);e.subscribe(C);e.subscribe(E);e.subscribe(v);e.subscribe(k);e.init();
